package me.zeroX150.cornos.features.module.impl.exploit;

import me.zeroX150.cornos.Cornos;
import me.zeroX150.cornos.features.module.Module;
import me.zeroX150.cornos.features.module.ModuleType;
import me.zeroX150.cornos.features.module.impl.movement.Flight;
import net.minecraft.network.packet.c2s.play.PlayerMoveC2SPacket;
import net.minecraft.network.packet.c2s.play.TeleportConfirmC2SPacket;
import net.minecraft.util.math.Vec3d;

public class Suicide extends Module {
    public Suicide() {
        super("Suicide", "You know what this does", ModuleType.EXPLOIT);
    }

    @Override
    public void onExecute() {
        Vec3d ppos = Cornos.minecraft.player.getPos();
        Cornos.minecraft.player.updatePosition(ppos.x, ppos.y + 4, ppos.z);
        Cornos.minecraft.player.setOnGround(false);
        Cornos.minecraft.player.fallDistance = 9999f;
        PlayerMoveC2SPacket p = new PlayerMoveC2SPacket.PositionOnly(ppos.x, ppos.y + 9999, ppos.z, Cornos.minecraft.player.isOnGround());
        PlayerMoveC2SPacket p1 = new PlayerMoveC2SPacket.PositionOnly(ppos.x, ppos.y + 4, ppos.z, Cornos.minecraft.player.isOnGround());
        Cornos.minecraft.getNetworkHandler().sendPacket(p1);
        Cornos.minecraft.getNetworkHandler().sendPacket(new TeleportConfirmC2SPacket(++Flight.tpid));
        Cornos.minecraft.getNetworkHandler().sendPacket(p);
        Cornos.minecraft.getNetworkHandler().sendPacket(new TeleportConfirmC2SPacket(++Flight.tpid));
        Cornos.minecraft.getNetworkHandler().sendPacket(p1);
        Cornos.minecraft.getNetworkHandler().sendPacket(new TeleportConfirmC2SPacket(Flight.tpid));
        this.setEnabled(false);
        super.onExecute();
    }
}
