package me.zeroX150.cornos.features.module.impl.exploit;

import me.zeroX150.cornos.etc.event.EventHelper;
import me.zeroX150.cornos.etc.event.EventType;
import me.zeroX150.cornos.etc.event.arg.PacketApplyEvent;
import me.zeroX150.cornos.features.module.Module;
import me.zeroX150.cornos.features.module.ModuleType;
import net.minecraft.network.packet.s2c.play.PlaySoundS2CPacket;
import net.minecraft.sound.SoundEvents;

public class AntiOffhandCrash extends Module {
	public AntiOffhandCrash() {
		super("AntiOffhandCrash", "Prevents you from getting bonked by some random mf with inertia",
				ModuleType.EXPLOIT);
		Module parent = this;
		EventHelper.BUS.registerEvent(EventType.ONPACKETHANDLE, event -> {
			if (!parent.isEnabled())
				return;
			PacketApplyEvent pae = (PacketApplyEvent) event;
			if (pae.packet instanceof PlaySoundS2CPacket) {
				if (((PlaySoundS2CPacket) pae.packet).getSound() == SoundEvents.ITEM_ARMOR_EQUIP_GENERIC)
					event.cancel();
			}
		});

	}
}
